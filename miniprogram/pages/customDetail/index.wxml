<view class="detail-container">
  <!-- 轮播图 -->
  <swiper class="top-swiper" indicator-dots='true' display-multiple-items='1' autoplay='true' circular='true' interval='2000'>
    <block wx:for="{{activity.images}}" wx:key="index">
      <swiper-item>
        <view class='swiper-item-box'>
          <!-- <text class='swiper-item-content'>{{item.content}}</text> -->
          <image class="swiper-item-image" src="{{item}}" mode="widthFix" />
        </view>
      </swiper-item>
    </block>
  </swiper>

  <!-- 发布者 -->
  <view class="publisher-container">
    <!-- TODO: 点击跳转发布者主页 -->
    <image class="avatar" src="{{ activity.publisher.avatar }}" mode="widthFix"></image>
    <view class="nickname">@{{ activity.publisher.nickname }}</view>
  </view>

  <!-- 标题 -->
  <view class="title-container base-card">
    <view class="title-row">
      <text class="title">{{activity.title}}</text>
      <!-- <view class="duration">{{activity.duration}} {{activity.duration > 1? 'Days': 'Day'}}</view> -->
    </view>
    <!-- <view class="content">{{activity.content}}</view>
    <view class="other-elements">
      <view class="other-elements-item place">
        <text class="iconfont icon-place"></text>
        <text>{{activity.place}}</text>
      </view>
      <view class="other-elements-item leader">
        <text class="iconfont icon-flag"></text>
        <view>{{activity.tourSchedules[curTourIndex].leaders[0].nickname}}</view>
      </view>
      <view class="other-elements-item people">
        <text class="iconfont icon-friend"></text>
        <view>
          {{activity.tourSchedules[curTourIndex].minPeople}}-{{activity.tourSchedules[curTourIndex].maxPeople}}人
        </view>
      </view>
    </view> -->
  </view>

  <!-- 选择团期 -->
  <view class="schedule-container base-card">
    <view>活动人数：{{activity.tourSchedules[curTourIndex].minPeople}} - {{activity.tourSchedules[curTourIndex].maxPeople}}人</view>
    <view>活动时间：{{ activity.tourSchedules[curTourIndex].startDate }} - {{ activity.tourSchedules[curTourIndex].endDate }}</view>
    <view>报名截止：{{ activity.tourSchedules[curTourIndex].deadline }}</view>
    <view>
      <text>活动地点：{{ activity.meetingPoint[0].name }}</text>
      <button size="mini" bind:tap="onSelectLocation">地图</button>
    </view>
  </view>

  <!-- 活动成员 -->
  <view wx:if="{{activity.tourSchedules[curTourIndex].members && activity.tourSchedules[curTourIndex].members.length > 0}}" class="member-container base-card">
    <view class="title-row">
      {{activity.tourSchedules[curTourIndex].members.length}}人已报名
      <!-- <text class="iconfont icon-arrow-right"></text> -->
    </view>
    <scroll-view scroll-x="true" show-scrollbar="false" enhanced="true">
      <view class="member-list">
        <view class="member" wx:for="{{activity.tourSchedules[curTourIndex].members}}" wx:key="id">
          <view class="avatar-box">
            <image class="avatar" src="{{item.avatar}}"></image>
            <!-- 1男 2女 0 不展示 -->
            <view wx:if="{{item.gender !== 0}}" class="icon-box {{item.gender === 1 ? 'man' : item.gender === 2 ? 'woman' : ''}} ">
              <text class="iconfont {{GENDER_NUMBER_TO_LABEL[item.gender]}} "></text>
            </view>
          </view>
          <view class="nickname">{{item.nickname}}</view>
          <view class="university">{{item.university || "****大学"}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 活动介绍 -->
  <view class="schedule-container base-card">
    <view class="title-row">活动介绍</view>
    <text>{{ activity.introduce }}</text>
  </view>


  <!-- 底部分割线 -->
  <view class="bottom-divider"></view>
  <!-- 底部弹窗 -->
  <van-popup z-index="200" show="{{ showPopup }}" position="bottom" bind:close="onPopupClose" round closeable>
    <view class="popup-container">
      <view class="title-row">{{popupContent.title}}</view>
      <view class="content">
        <text>{{popupContent.content}}</text>
      </view>
    </view>
  </van-popup>
  <!-- 下单栏 -->
  <van-submit-bar custom-class="submit-bar" price="{{ activity.tourSchedules[curTourIndex].price }}" label=" " button-text="下单" decimal-length="2" bind:submit="joinActivity" disabled="{{activity.tourSchedules[curTourIndex].members.length >= activity.tourSchedules[curTourIndex].maxPeople || activity.tourSchedules[curTourIndex].hasMe}}" tip="{{ activity.tourSchedules[curTourIndex].members.length >= activity.tourSchedules[curTourIndex].maxPeople ? '报名人数已满，请选择其他团期' : activity.tourSchedules[curTourIndex].hasMe ?  '您已报名过该期活动，不可重复报名' : false }}" />
  <!-- toast -->
  <van-toast id="van-toast" />
</view>