<view class="container">
    <view class="title-bar">
        <view class="title">48小时热帖榜</view>
        <view class="subtitle">实时更新人气最高的前10条帖子</view>
    </view>
    <view class="posts-list">
        <view wx:if="{{isLoading}}" class="loading-container">
            <view class="loading-spinner"></view>
            <text class="loading-text">加载中...</text>
        </view>
        <view wx:elif="{{posts.length === 0}}" class="empty-container">
            <text class="empty-tip">暂无热门帖子</text>
        </view>
        <view wx:else>
            <view class="post-item" wx:for="{{posts}}" wx:key="id" data-id="{{item.id}}" bindtap="navigateToDetail">
                <view class="post-header">
                    <view class="rank-tag rank-{{index + 1}}">{{index + 1}}</view>
                    <view class="post-time">{{item.createdAt}}</view>
                </view>
                <view class="post-content">
                    <view class="post-text">{{item.content}}</view>
                    <!-- 如果有图片，显示图片 -->
                    <view wx:if="{{item.images && item.images.length > 0}}" class="post-images">
                        <view class="image-grid {{item.images.length === 1 ? 'single' : item.images.length === 2 || item.images.length === 4 ? 'double' : 'triple'}}">
                            <image wx:for="{{item.images}}" wx:key="index" wx:for-item="image" class="post-image {{item.images.length === 1 ? 'single-image' : ''}}" src="{{image}}" mode="aspectFill" lazy-load="true"></image>
                        </view>
                    </view>
                </view>
                <view class="post-footer">
                    <view class="post-stats">
                        <view class="stat-item">
                            <image class="icon" src="/images/social/{{item.isLiked ? 'liked' : 'like'}}.svg" mode="aspectFill" />
                            <view class="{{item.isLiked ? 'liked' : ''}}">
                                {{item.likesCount || 0}}
                            </view>
                        </view>
                        <view class="stat-item">
                            <image class="icon" src="/images/social/coment.svg" mode="aspectFill" />
                            <view>{{item.commentsCount || 0}}</view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>
<van-toast id="van-toast" />